<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ƒêƒÉng k√Ω - Flower'Lna</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

  <!-- Google Font & Custom CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    body {
      background-color: #faf9f7;
      font-family: 'Roboto', sans-serif;
      color: #2f2f2f;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* HEADER */
    header {
      background: #fff;
      border-bottom: 1px solid #eee;
      padding: 15px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .logo {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: #b08c3a;
      font-weight: 700;
      letter-spacing: 2px;
    }

    .contact-info {
      text-align: right;
      color: #7c7c7c;
      font-size: 14px;
    }

    /* MENU */
    .navbar {
      background-color: #fff8f0 !important;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
    }

    .navbar-nav .nav-link {
      color: #3b2d1f !important;
      font-weight: 500;
      font-size: 16px;
      margin: 0 10px;
      transition: 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .navbar-nav .nav-link:hover {
      color: #b08c3a !important;
    }

    /* AUTH SECTION */
    .auth-container {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 0;
    }

    .auth-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      overflow: hidden;
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
    }

    .auth-image {
      background: url('https://images.unsplash.com/photo-1464207687429-7505649dae38?auto=format&fit=crop&w=800&q=80') center/cover no-repeat;
      height: 100%;
      min-height: 600px;
      position: relative;
    }

    .auth-image::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(176, 140, 58, 0.1) 0%, rgba(212, 175, 55, 0.2) 100%);
    }

    .auth-form {
      padding: 40px;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .auth-title {
      font-family: 'Playfair Display', serif;
      font-size: 32px;
      color: #b08c3a;
      margin-bottom: 10px;
      text-align: center;
    }

    .auth-subtitle {
      color: #7c7c7c;
      text-align: center;
      margin-bottom: 30px;
      font-size: 16px;
    }

    .form-control, .form-select {
      border-radius: 8px;
      padding: 12px 15px;
      border: 1px solid #e0e0e0;
      margin-bottom: 15px;
      transition: 0.3s;
      font-size: 14px;
    }

    .form-control:focus, .form-select:focus {
      border-color: #b08c3a;
      box-shadow: 0 0 0 0.2rem rgba(176, 140, 58, 0.25);
    }

    .form-check-input:checked {
      background-color: #b08c3a;
      border-color: #b08c3a;
    }

    .form-check-label {
      font-size: 14px;
      color: #5a5a5a;
    }

    .btn-auth {
      background-color: #b08c3a;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 12px 30px;
      font-weight: 600;
      width: 100%;
      transition: 0.3s;
      margin-top: 10px;
    }

    .btn-auth:hover {
      background-color: #d4af37;
      transform: translateY(-2px);
    }

    .btn-auth:disabled {
      background-color: #cccccc;
      transform: none;
    }

    .auth-switch {
      text-align: center;
      margin-top: 25px;
      color: #7c7c7c;
      font-size: 14px;
    }

    .auth-switch a {
      color: #b08c3a;
      text-decoration: none;
      font-weight: 500;
    }

    .auth-switch a:hover {
      text-decoration: underline;
    }

    /* Th√¥ng b√°o */
    .alert-custom {
      border-radius: 8px;
      border: none;
      padding: 12px 15px;
      margin-bottom: 20px;
    }

    /* Loading spinner */
    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 2px solid #f3f3f3;
      border-top: 2px solid #b08c3a;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .password-strength {
      height: 4px;
      border-radius: 2px;
      margin-top: 5px;
      transition: all 0.3s;
    }

    .strength-weak { background-color: #dc3545; width: 25%; }
    .strength-medium { background-color: #ffc107; width: 50%; }
    .strength-strong { background-color: #28a745; width: 75%; }
    .strength-very-strong { background-color: #20c997; width: 100%; }

    /* Vai tr√≤ selection - ƒê√É CH·ªàNH NH·ªé L·∫†I */
    .vai-tro-option {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 8px;
      cursor: pointer;
      transition: all 0.3s;
      height: 100%;
    }

    .vai-tro-option:hover {
      border-color: #b08c3a;
      background-color: #fff8f0;
    }

    .vai-tro-option.selected {
      border-color: #b08c3a;
      background-color: #fff8f0;
      box-shadow: 0 2px 8px rgba(176, 140, 58, 0.2);
    }

    .vai-tro-icon {
      font-size: 20px;
      color: #b08c3a;
      margin-bottom: 5px;
    }

    .vai-tro-title {
      font-weight: 600;
      margin-bottom: 3px;
      font-size: 14px;
    }

    .vai-tro-description {
      font-size: 11px;
      color: #7c7c7c;
      line-height: 1.3;
    }

    /* Th√¥ng b√°o th√†nh c√¥ng */
    .success-message {
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      margin-bottom: 20px;
      animation: fadeInUp 0.6s ease-out;
    }

    .success-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* FOOTER */
    footer {
      background: #1e1a16;
      color: #d4c7a0;
      text-align: center;
      padding: 40px 0;
      margin-top: 50px;
    }

    footer h5 {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      margin-bottom: 15px;
    }

    footer p {
      font-size: 14px;
      color: #b9a97d;
    }

    footer a {
      color: #d4af37;
      text-decoration: none;
      margin: 0 10px;
      font-size: 18px;
    }

    footer a:hover {
      color: #fff;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .auth-image {
        min-height: 300px;
      }
      
      .auth-form {
        padding: 30px 25px;
      }
    }

    @media (max-width: 576px) {
      .auth-form {
        padding: 25px 20px;
      }
      
      .auth-title {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="container-fluid">
    <div class="container d-flex justify-content-between align-items-center">
      <a href="index.html" class="logo text-decoration-none">üå∏ Flower'Lna</a>
      <div class="contact-info">
        Hotline: <strong>1800 88 88 88</strong><br>
        Flower'Lna.vn | contact@FlowerLna.vn
      </div>
    </div>
  </header>

  <!-- MENU -->
  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="index.html">Trang ch·ªß</a></li>
          <li class="nav-item"><a class="nav-link" href="#">B·ªô s∆∞u t·∫≠p</a></li>
          <li class="nav-item"><a class="nav-link" href="#">D·ªãch v·ª•</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Khuy·∫øn m√£i</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Li√™n h·ªá</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- AUTH SECTION -->
  <section class="auth-container">
    <div class="container">
      <div class="row auth-card">
        <!-- H√¨nh ·∫£nh trang tr√≠ -->
        <div class="col-md-6 p-0">
          <div class="auth-image"></div>
        </div>
        
        <!-- Form ƒëƒÉng k√Ω -->
        <div class="col-md-6 p-0">
          <div class="auth-form">
            <h2 class="auth-title">ƒêƒÉng k√Ω t√†i kho·∫£n</h2>
            <p class="auth-subtitle">Tham gia c√πng Flower'Lna ƒë·ªÉ tr·∫£i nghi·ªám d·ªãch v·ª• t·ªët nh·∫•t</p>

            <!-- Th√¥ng b√°o -->
            <div id="thongBao"></div>
            
            <form id="formDangKy">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <input type="text" class="form-control" id="hoTen" placeholder="H·ªç v√† t√™n" required>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <input type="tel" class="form-control" id="soDienThoai" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                  </div>
                </div>
              </div>
              
              <div class="mb-3">
                <input type="email" class="form-control" id="email" placeholder="Email" required>
              </div>
              
              <div class="mb-3">
                <input type="password" class="form-control" id="matKhau" placeholder="M·∫≠t kh·∫©u" required minlength="6">
                <div id="passwordStrength" class="password-strength"></div>
                <small class="text-muted">M·∫≠t kh·∫©u t·ªëi thi·ªÉu 6 k√Ω t·ª±</small>
              </div>
              
              <div class="mb-3">
                <input type="password" class="form-control" id="xacNhanMatKhau" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u" required>
                <div id="passwordMatch" class="mt-1"></div>
              </div>

              <!-- Ph·∫ßn ch·ªçn vai tr√≤ - ƒê√É CH·ªàNH S·ª¨A -->
              <div class="mb-3">
                <label class="form-label fw-semibold">Vai tr√≤ <span class="text-danger">*</span></label>
                <div class="row g-2">
                  <div class="col-6">
                    <div class="vai-tro-option" data-value="khachhang">
                      <div class="vai-tro-icon">
                        <i class="bi bi-person"></i>
                      </div>
                      <div class="vai-tro-title">Kh√°ch h√†ng</div>
                      <div class="vai-tro-description">Mua s·∫Øm v√† ƒë·∫∑t hoa</div>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="vai-tro-option" data-value="quantri">
                      <div class="vai-tro-icon">
                        <i class="bi bi-shield-check"></i>
                      </div>
                      <div class="vai-tro-title">Admin</div>
                      <div class="vai-tro-description">Qu·∫£n tr·ªã h·ªá th·ªëng</div>
                    </div>
                  </div>
                </div>
                <input type="hidden" id="vaiTro" name="vaiTro" value="khachhang" required>
              </div>
              
              <div class="mb-3">
                <textarea class="form-control" id="diaChi" rows="2" placeholder="ƒê·ªãa ch·ªâ"></textarea>
              </div>
              
              <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="dongYDieuKhoan" required>
                <label class="form-check-label" for="dongYDieuKhoan">
                  T√¥i ƒë·ªìng √Ω v·ªõi <a href="#" class="text-decoration-none">ƒêi·ªÅu kho·∫£n d·ªãch v·ª•</a> v√† <a href="#" class="text-decoration-none">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                </label>
              </div>
              
              <button type="submit" class="btn btn-auth" id="btnDangKy">
                ƒêƒÉng k√Ω
              </button>
            </form>
            
            <div class="auth-switch">
              ƒê√£ c√≥ t√†i kho·∫£n? <a href="login.html" class="text-decoration-none">ƒêƒÉng nh·∫≠p ngay</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <h5>Flower'Lna - Hoa Th∆∞·ª£ng L∆∞u</h5>
      <p>ƒê·ªãa ch·ªâ: 88 Nguy·ªÖn Hu·ªá, Qu·∫≠n 1, TP.HCM<br>
      Hotline: 1800 88 88 88 | Email: contact@FlowerLna.vn</p>
      <div>
        <a href="#"><i class="bi bi-facebook"></i></a>
        <a href="#"><i class="bi bi-instagram"></i></a>
        <a href="#"><i class="bi bi-twitter"></i></a>
      </div>
      <p class="mt-3">&copy; 2025 Flower'Lna. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Bootstrap JS + jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script>
    $(document).ready(function() {
      // Hi·ªÉn th·ªã th√¥ng b√°o
      function hienThiThongBao(noiDung, loai = 'success') {
        const thongBao = $('#thongBao');
        
        if (loai === 'success') {
          // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng ƒë·∫πp m·∫Øt
          thongBao.html(`
            <div class="success-message">
              <div class="success-icon">
                <i class="bi bi-check-circle-fill"></i>
              </div>
              <h4 class="mb-2">ƒêƒÉng k√Ω th√†nh c√¥ng!</h4>
              <p class="mb-0">${noiDung}</p>
            </div>
          `).show();
        } else {
          // Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
          thongBao.html(`
            <div class="alert alert-danger alert-custom alert-dismissible fade show" role="alert">
              <i class="bi bi-exclamation-triangle me-2"></i>${noiDung}
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          `).show();
        }
      }

      // X·ª≠ l√Ω ch·ªçn vai tr√≤
      $('.vai-tro-option').click(function() {
        $('.vai-tro-option').removeClass('selected');
        $(this).addClass('selected');
        const vaiTro = $(this).data('value');
        $('#vaiTro').val(vaiTro);
      });

      // M·∫∑c ƒë·ªãnh ch·ªçn kh√°ch h√†ng
      $('.vai-tro-option[data-value="khachhang"]').addClass('selected');

      // Ki·ªÉm tra ƒë·ªô m·∫°nh m·∫≠t kh·∫©u
      function kiemTraDoManhMatKhau(matKhau) {
        const strengthBar = $('#passwordStrength');
        let strength = 0;
        
        if (matKhau.length >= 6) strength += 1;
        if (matKhau.match(/[a-z]+/)) strength += 1;
        if (matKhau.match(/[A-Z]+/)) strength += 1;
        if (matKhau.match(/[0-9]+/)) strength += 1;
        if (matKhau.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/)) strength += 1;
        
        strengthBar.removeClass('strength-weak strength-medium strength-strong strength-very-strong');
        
        if (matKhau.length === 0) {
          strengthBar.css('width', '0');
        } else if (strength < 2) {
          strengthBar.addClass('strength-weak');
        } else if (strength === 2) {
          strengthBar.addClass('strength-medium');
        } else if (strength === 3) {
          strengthBar.addClass('strength-strong');
        } else {
          strengthBar.addClass('strength-very-strong');
        }
      }

      // Ki·ªÉm tra kh·ªõp m·∫≠t kh·∫©u
      function kiemTraKhopMatKhau() {
        const matKhau = $('#matKhau').val();
        const xacNhanMatKhau = $('#xacNhanMatKhau').val();
        const matchDiv = $('#passwordMatch');
        
        if (xacNhanMatKhau.length === 0) {
          matchDiv.html('');
        } else if (matKhau === xacNhanMatKhau) {
          matchDiv.html('<small class="text-success"><i class="bi bi-check-circle"></i> M·∫≠t kh·∫©u kh·ªõp</small>');
        } else {
          matchDiv.html('<small class="text-danger"><i class="bi bi-x-circle"></i> M·∫≠t kh·∫©u kh√¥ng kh·ªõp</small>');
        }
      }

      // S·ª± ki·ªán cho m·∫≠t kh·∫©u
      $('#matKhau').on('input', function() {
        kiemTraDoManhMatKhau($(this).val());
        kiemTraKhopMatKhau();
      });

      $('#xacNhanMatKhau').on('input', kiemTraKhopMatKhau);

      // X·ª≠ l√Ω form ƒëƒÉng k√Ω
      $('#formDangKy').submit(function(e) {
        e.preventDefault();
        
        const hoTen = $('#hoTen').val().trim();
        const email = $('#email').val().trim();
        const matKhau = $('#matKhau').val();
        const xacNhanMatKhau = $('#xacNhanMatKhau').val();
        const soDienThoai = $('#soDienThoai').val().trim();
        const diaChi = $('#diaChi').val().trim();
        const vaiTro = $('#vaiTro').val();
        
        // Ki·ªÉm tra d·ªØ li·ªáu
        if (!hoTen || !email || !matKhau || !vaiTro) {
          hienThiThongBao('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc', 'error');
          return;
        }
        
        if (matKhau.length < 6) {
          hienThiThongBao('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±', 'error');
          return;
        }
        
        if (matKhau !== xacNhanMatKhau) {
          hienThiThongBao('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp', 'error');
          return;
        }
        
        if (!$('#dongYDieuKhoan').is(':checked')) {
          hienThiThongBao('Vui l√≤ng ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu kho·∫£n d·ªãch v·ª•', 'error');
          return;
        }
        
        // Hi·ªÉn th·ªã loading
        const btn = $('#btnDangKy');
        btn.prop('disabled', true).html('<div class="loading-spinner"></div> ƒêang ƒëƒÉng k√Ω...');
        
        // G·ªçi API ƒëƒÉng k√Ω
        $.ajax({
          url: '../api/dangki.php',
          type: 'POST',
          contentType: 'application/json',
          data: JSON.stringify({
            HoTen: hoTen,
            Email: email,
            MatKhau: matKhau,
            SoDienThoai: soDienThoai,
            DiaChi: diaChi,
            VaiTro: vaiTro
          }),
          success: function(phucHoi) {
            if (phucHoi.thanhCong) {
              // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng ƒë·∫πp m·∫Øt
              hienThiThongBao('T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng. B·∫°n s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn trang ƒëƒÉng nh·∫≠p trong gi√¢y l√°t...', 'success');
              
              // ·∫®n form ƒëƒÉng k√Ω
              $('#formDangKy').fadeOut(300);
              
              // Chuy·ªÉn h∆∞·ªõng ƒë·∫øn trang ƒëƒÉng nh·∫≠p sau 3 gi√¢y
              setTimeout(() => {
                window.location.href = 'login.html';
              }, 3000);
            } else {
              hienThiThongBao(phucHoi.loi || 'ƒêƒÉng k√Ω th·∫•t b·∫°i', 'error');
              btn.prop('disabled', false).html('ƒêƒÉng k√Ω');
            }
          },
          error: function(xhr, trangThai, loi) {
            let thongBaoLoi = 'L·ªói k·∫øt n·ªëi server';
            try {
              const phucHoiLoi = JSON.parse(xhr.responseText);
              thongBaoLoi = phucHoiLoi.loi || thongBaoLoi;
            } catch (e) {
              thongBaoLoi = xhr.responseText || thongBaoLoi;
            }
            
            hienThiThongBao(thongBaoLoi, 'error');
            btn.prop('disabled', false).html('ƒêƒÉng k√Ω');
          }
        });
      });
    });
  </script>
</body>
</html>