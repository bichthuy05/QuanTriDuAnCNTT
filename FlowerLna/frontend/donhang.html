<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n L√Ω ƒê∆°n H√†ng - Flower'Lna</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <!-- Google Font & Custom CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    body {
      background-color: #faf9f7;
      font-family: 'Roboto', sans-serif;
      color: #2f2f2f;
    }

    /* HEADER */
    header {
      background: #fff;
      border-bottom: 1px solid #eee;
      padding: 15px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .logo {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: #b08c3a;
      font-weight: 700;
      letter-spacing: 2px;
    }

    .contact-info {
      text-align: right;
      color: #7c7c7c;
      font-size: 14px;
    }

    /* MENU */
    .navbar {
      background-color: #fff8f0 !important;
      border-top: 1px solid #eee;
      border-bottom: 1px solid #eee;
    }

    .navbar-nav .nav-link {
      color: #3b2d1f !important;
      font-weight: 500;
      font-size: 16px;
      margin: 0 10px;
      transition: 0.3s;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .navbar-nav .nav-link:hover {
      color: #b08c3a !important;
    }

    /* PAGE HEADER */
    .page-header {
      background: linear-gradient(rgba(176, 140, 58, 0.1), rgba(176, 140, 58, 0.05));
      padding: 40px 0;
      text-align: center;
      margin-bottom: 40px;
    }

    .page-header h1 {
      font-family: 'Playfair Display', serif;
      color: #b08c3a;
      font-size: 36px;
      margin-bottom: 10px;
    }

    .page-header p {
      color: #7c7c7c;
      font-size: 16px;
    }

    /* ORDER CONTENT */
    .order-card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
      padding: 25px;
      margin-bottom: 30px;
      border-top: 3px solid #b08c3a;
    }

    .order-card h3 {
      font-family: 'Playfair Display', serif;
      color: #b08c3a;
      font-size: 22px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }

    .order-summary {
      background: #fff8f0;
      border-radius: 10px;
      padding: 20px;
      margin-top: 20px;
    }

    .order-summary h4 {
      font-family: 'Playfair Display', serif;
      color: #b08c3a;
      font-size: 20px;
      margin-bottom: 15px;
    }

    .btn-luxe {
      padding: 12px 35px;
      background-color: #b08c3a;
      color: #fff;
      border: none;
      font-weight: 600;
      border-radius: 30px;
      transition: 0.3s;
    }

    .btn-luxe:hover {
      background-color: #d4af37;
      transform: translateY(-2px);
    }

    .btn-outline-luxe {
      padding: 12px 35px;
      background-color: transparent;
      color: #b08c3a;
      border: 2px solid #b08c3a;
      font-weight: 600;
      border-radius: 30px;
      transition: 0.3s;
    }

    .btn-outline-luxe:hover {
      background-color: #b08c3a;
      color: #fff;
    }

    .status-badge {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 500;
    }

    .status-pending {
      background-color: #fff8f0;
      color: #b08c3a;
    }

    .status-confirmed {
      background-color: #e8f5e9;
      color: #2e7d32;
    }

    .status-shipped {
      background-color: #e3f2fd;
      color: #1565c0;
    }

    .status-delivered {
      background-color: #f3e5f5;
      color: #7b1fa2;
    }

    .status-cancelled {
      background-color: #ffebee;
      color: #c62828;
    }

    .order-table {
      width: 100%;
      border-collapse: collapse;
    }

    .order-table th {
      background-color: #fff8f0;
      color: #b08c3a;
      font-weight: 600;
      padding: 12px 15px;
      text-align: left;
      border-bottom: 2px solid #b08c3a;
    }

    .order-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
    }

    .order-table tr:hover {
      background-color: #faf9f7;
    }

    .action-buttons .btn {
      margin-right: 5px;
      margin-bottom: 5px;
    }

    /* MODAL STYLES */
    .modal-header {
      background-color: #fff8f0;
      border-bottom: 1px solid #b08c3a;
    }

    .modal-title {
      font-family: 'Playfair Display', serif;
      color: #b08c3a;
    }

    .modal-footer {
      border-top: 1px solid #eee;
    }

    /* FOOTER */
    footer {
      background: #1e1a16;
      color: #d4c7a0;
      text-align: center;
      padding: 40px 0;
      margin-top: 50px;
    }

    footer h5 {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      margin-bottom: 15px;
    }

    footer p {
      font-size: 14px;
      color: #b9a97d;
    }

    footer a {
      color: #d4af37;
      text-decoration: none;
      margin: 0 10px;
      font-size: 18px;
    }

    footer a:hover {
      color: #fff;
    }

    .loading {
      text-align: center;
      padding: 30px;
      color: #b08c3a;
    }

    .alert-luxe {
      background-color: #fff8f0;
      border-left: 4px solid #b08c3a;
      color: #3b2d1f;
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="container-fluid">
    <div class="container d-flex justify-content-between align-items-center">
      <div class="logo">üå∏ Flower'Lna</div>
      <div class="contact-info">
        Hotline: <strong>1800 88 88 88</strong><br>
        Flower'Lna.vn | contact@FlowerLna.vn
      </div>
    </div>
  </header>

  <!-- MENU -->
  <nav class="navbar navbar-expand-lg navbar-light">
    <div class="container">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="index.html">Trang ch·ªß</a></li>
          <li class="nav-item"><a class="nav-link" href="#">B·ªô s∆∞u t·∫≠p</a></li>
          <li class="nav-item"><a class="nav-link" href="#">D·ªãch v·ª•</a></li>
          <li class="nav-item"><a class="nav-link active" href="donhang.html">ƒê∆°n h√†ng</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Li√™n h·ªá</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- PAGE HEADER -->
  <section class="page-header">
    <div class="container">
      <h1>Qu·∫£n L√Ω ƒê∆°n H√†ng</h1>
      <p>Theo d√µi v√† qu·∫£n l√Ω t·∫•t c·∫£ ƒë∆°n h√†ng c·ªßa b·∫°n</p>
    </div>
  </section>

  <!-- ORDER CONTENT -->
  <div class="container">
    <div class="row mb-4">
      <div class="col-md-6">
        <button class="btn btn-luxe" data-bs-toggle="modal" data-bs-target="#addOrderModal">
          <i class="bi bi-plus-circle me-2"></i>Th√™m ƒê∆°n H√†ng M·ªõi
        </button>
      </div>
      <div class="col-md-6 text-end">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="T√¨m ki·∫øm ƒë∆°n h√†ng..." id="searchOrder">
          <button class="btn btn-outline-luxe" type="button">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="order-card">
      <h3>Danh S√°ch ƒê∆°n H√†ng</h3>
      
      <div id="loadingMessage" class="loading">
        <div class="spinner-border text-luxe" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">ƒêang t·∫£i d·ªØ li·ªáu...</p>
      </div>
      
      <div id="ordersTable" style="display: none;">
        <div class="table-responsive">
          <table class="order-table">
            <thead>
              <tr>
                <th>M√£ ƒêH</th>
                <th>Kh√°ch H√†ng</th>
                <th>Ng√†y ƒê·∫∑t</th>
                <th>T·ªïng Ti·ªÅn</th>
                <th>Tr·∫°ng Th√°i</th>
                <th>Thao T√°c</th>
              </tr>
            </thead>
            <tbody id="ordersList">
              <!-- Orders will be populated here by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <div class="d-flex justify-content-between align-items-center mt-4">
          <div id="orderCount">Hi·ªÉn th·ªã 0 ƒë∆°n h√†ng</div>
          <nav>
            <ul class="pagination" id="pagination">
              <!-- Pagination will be generated here -->
            </ul>
          </nav>
        </div>
      </div>
      
      <div id="errorMessage" class="alert alert-danger mt-3" style="display: none;">
        C√≥ l·ªói x·∫£y ra khi t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.
      </div>
    </div>
  </div>

  <!-- Add Order Modal -->
  <div class="modal fade" id="addOrderModal" tabindex="-1" aria-labelledby="addOrderModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addOrderModalLabel">Th√™m ƒê∆°n H√†ng M·ªõi</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="addOrderForm">
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="customerName" class="form-label">T√™n Kh√°ch H√†ng</label>
                  <input type="text" class="form-control" id="customerName" required>
                </div>
                <div class="mb-3">
                  <label for="customerPhone" class="form-label">S·ªë ƒêi·ªán Tho·∫°i</label>
                  <input type="text" class="form-control" id="customerPhone" required>
                </div>
                <div class="mb-3">
                  <label for="customerEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="customerEmail">
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="orderDate" class="form-label">Ng√†y ƒê·∫∑t</label>
                  <input type="date" class="form-control" id="orderDate" required>
                </div>
                <div class="mb-3">
                  <label for="deliveryDate" class="form-label">Ng√†y Giao</label>
                  <input type="date" class="form-control" id="deliveryDate">
                </div>
                <div class="mb-3">
                  <label for="totalAmount" class="form-label">T·ªïng Ti·ªÅn (VND)</label>
                  <input type="number" class="form-control" id="totalAmount" required>
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label for="orderStatus" class="form-label">Tr·∫°ng Th√°i</label>
              <select class="form-select" id="orderStatus">
                <option value="Ch·ªù x√°c nh·∫≠n">Ch·ªù x√°c nh·∫≠n</option>
                <option value="ƒê√£ x√°c nh·∫≠n">ƒê√£ x√°c nh·∫≠n</option>
                <option value="ƒêang giao h√†ng">ƒêang giao h√†ng</option>
                <option value="ƒê√£ giao">ƒê√£ giao</option>
                <option value="ƒê√£ h·ªßy">ƒê√£ h·ªßy</option>
              </select>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
          <button type="button" class="btn btn-luxe" id="saveOrderBtn">L∆∞u ƒê∆°n H√†ng</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Order Detail Modal -->
  <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-labelledby="orderDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="orderDetailModalLabel">Chi Ti·∫øt ƒê∆°n H√†ng</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="orderDetailContent">
          <!-- Order details will be populated here -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <h5>Flower'Lna - Hoa Th∆∞·ª£ng L∆∞u</h5>
      <p>ƒê·ªãa ch·ªâ: 88 Nguy·ªÖn Hu·ªá, Qu·∫≠n 1, TP.HCM<br>
      Hotline: 1800 88 88 88 | Email: contact@FlowerLna.vn</p>
      <div>
        <a href="#"><i class="bi bi-facebook"></i></a>
        <a href="#"><i class="bi bi-instagram"></i></a>
        <a href="#"><i class="bi bi-twitter"></i></a>
      </div>
      <p class="mt-3">&copy; 2025 Flower'Lna. All Rights Reserved.</p>
    </div>
  </footer>

  <!-- Bootstrap JS + jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // API Configuration
    const API_BASE_URL = 'donhang.php'; // Adjust path as needed
    
    // DOM Elements
    const ordersList = document.getElementById('ordersList');
    const ordersTable = document.getElementById('ordersTable');
    const loadingMessage = document.getElementById('loadingMessage');
    const errorMessage = document.getElementById('errorMessage');
    const orderCount = document.getElementById('orderCount');
    const pagination = document.getElementById('pagination');
    const saveOrderBtn = document.getElementById('saveOrderBtn');
    const searchOrder = document.getElementById('searchOrder');
    
    // Global variables
    let orders = [];
    let currentPage = 1;
    const itemsPerPage = 10;
    
    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      loadOrders();
      
      // Set today's date as default for new orders
      document.getElementById('orderDate').valueAsDate = new Date();
      
      // Event listeners
      saveOrderBtn.addEventListener('click', addNewOrder);
      searchOrder.addEventListener('input', filterOrders);
    });
    
    // Load orders from API
    function loadOrders() {
      loadingMessage.style.display = 'block';
      ordersTable.style.display = 'none';
      errorMessage.style.display = 'none';
      
      fetch(API_BASE_URL, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        orders = data;
        displayOrders();
        loadingMessage.style.display = 'none';
        ordersTable.style.display = 'block';
      })
      .catch(error => {
        console.error('Error loading orders:', error);
        loadingMessage.style.display = 'none';
        errorMessage.style.display = 'block';
      });
    }
    
    // Display orders in the table
    function displayOrders(page = 1) {
      currentPage = page;
      
      // Filter orders if search term exists
      const searchTerm = searchOrder.value.toLowerCase();
      let filteredOrders = orders;
      
      if (searchTerm) {
        filteredOrders = orders.filter(order => 
          order.TenKhachHang.toLowerCase().includes(searchTerm) ||
          order.MaDonHang.toString().includes(searchTerm) ||
          order.TrangThai.toLowerCase().includes(searchTerm)
        );
      }
      
      // Calculate pagination
      const totalPages = Math.ceil(filteredOrders.length / itemsPerPage);
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = Math.min(startIndex + itemsPerPage, filteredOrders.length);
      const currentOrders = filteredOrders.slice(startIndex, endIndex);
      
      // Update order count
      orderCount.textContent = `Hi·ªÉn th·ªã ${startIndex + 1}-${endIndex} c·ªßa ${filteredOrders.length} ƒë∆°n h√†ng`;
      
      // Clear current orders
      ordersList.innerHTML = '';
      
      // Add orders to table
      if (currentOrders.length === 0) {
        ordersList.innerHTML = `
          <tr>
            <td colspan="6" class="text-center py-4">
              <div class="alert alert-luxe">
                <i class="bi bi-info-circle me-2"></i>Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng n√†o.
              </div>
            </td>
          </tr>
        `;
      } else {
        currentOrders.forEach(order => {
          const row = document.createElement('tr');
          
          // Format date
          const orderDate = new Date(order.NgayDat).toLocaleDateString('vi-VN');
          
          // Format currency
          const formattedTotal = new Intl.NumberFormat('vi-VN', {
            style: 'currency',
            currency: 'VND'
          }).format(order.TongTien);
          
          // Status badge
          let statusClass = 'status-pending';
          if (order.TrangThai === 'ƒê√£ x√°c nh·∫≠n') statusClass = 'status-confirmed';
          else if (order.TrangThai === 'ƒêang giao h√†ng') statusClass = 'status-shipped';
          else if (order.TrangThai === 'ƒê√£ giao') statusClass = 'status-delivered';
          else if (order.TrangThai === 'ƒê√£ h·ªßy') statusClass = 'status-cancelled';
          
          row.innerHTML = `
            <td>#${order.MaDonHang}</td>
            <td>${order.TenKhachHang}</td>
            <td>${orderDate}</td>
            <td>${formattedTotal}</td>
            <td><span class="status-badge ${statusClass}">${order.TrangThai}</span></td>
            <td class="action-buttons">
              <button class="btn btn-sm btn-outline-luxe" onclick="viewOrderDetails(${order.MaDonHang})">
                <i class="bi bi-eye"></i>
              </button>
              <button class="btn btn-sm btn-outline-luxe" onclick="editOrder(${order.MaDonHang})">
                <i class="bi bi-pencil"></i>
              </button>
              <button class="btn btn-sm btn-outline-danger" onclick="deleteOrder(${order.MaDonHang})">
                <i class="bi bi-trash"></i>
              </button>
            </td>
          `;
          
          ordersList.appendChild(row);
        });
      }
      
      // Generate pagination
      generatePagination(totalPages, page);
    }
    
    // Generate pagination controls
    function generatePagination(totalPages, currentPage) {
      pagination.innerHTML = '';
      
      // Previous button
      const prevLi = document.createElement('li');
      prevLi.className = `page-item ${currentPage === 1 ? 'disabled' : ''}`;
      prevLi.innerHTML = `<a class="page-link" href="#" onclick="displayOrders(${currentPage - 1})">Tr∆∞·ªõc</a>`;
      pagination.appendChild(prevLi);
      
      // Page numbers
      const maxVisiblePages = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
      
      if (endPage - startPage + 1 < maxVisiblePages) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }
      
      for (let i = startPage; i <= endPage; i++) {
        const pageLi = document.createElement('li');
        pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
        pageLi.innerHTML = `<a class="page-link" href="#" onclick="displayOrders(${i})">${i}</a>`;
        pagination.appendChild(pageLi);
      }
      
      // Next button
      const nextLi = document.createElement('li');
      nextLi.className = `page-item ${currentPage === totalPages ? 'disabled' : ''}`;
      nextLi.innerHTML = `<a class="page-link" href="#" onclick="displayOrders(${currentPage + 1})">Sau</a>`;
      pagination.appendChild(nextLi);
    }
    
    // Filter orders based on search term
    function filterOrders() {
      displayOrders(1);
    }
    
    // Add new order
    function addNewOrder() {
      const customerName = document.getElementById('customerName').value;
      const customerPhone = document.getElementById('customerPhone').value;
      const customerEmail = document.getElementById('customerEmail').value;
      const orderDate = document.getElementById('orderDate').value;
      const deliveryDate = document.getElementById('deliveryDate').value;
      const totalAmount = document.getElementById('totalAmount').value;
      const orderStatus = document.getElementById('orderStatus').value;
      
      // In a real application, you would need to get the customer ID
      // For this demo, we'll create a temporary customer ID
      const customerId = Math.floor(Math.random() * 1000) + 1;
      
      const newOrder = {
        MaKhachHang: customerId,
        NgayDat: orderDate,
        NgayGiao: deliveryDate || null,
        TongTien: totalAmount,
        TrangThai: orderStatus
      };
      
      fetch(API_BASE_URL, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(newOrder)
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Close modal and reset form
          const modal = bootstrap.Modal.getInstance(document.getElementById('addOrderModal'));
          modal.hide();
          document.getElementById('addOrderForm').reset();
          
          // Reload orders
          loadOrders();
          
          // Show success message
          alert('Th√™m ƒë∆°n h√†ng th√†nh c√¥ng!');
        } else {
          alert('C√≥ l·ªói x·∫£y ra khi th√™m ƒë∆°n h√†ng: ' + data.message);
        }
      })
      .catch(error => {
        console.error('Error adding order:', error);
        alert('C√≥ l·ªói x·∫£y ra khi th√™m ƒë∆°n h√†ng.');
      });
    }
    
    // View order details
    function viewOrderDetails(orderId) {
      fetch(`${API_BASE_URL}?MaDonHang=${orderId}`, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(order => {
        // Format date
        const orderDate = new Date(order.NgayDat).toLocaleDateString('vi-VN');
        const deliveryDate = order.NgayGiao ? new Date(order.NgayGiao).toLocaleDateString('vi-VN') : 'Ch∆∞a x√°c ƒë·ªãnh';
        
        // Format currency
        const formattedTotal = new Intl.NumberFormat('vi-VN', {
          style: 'currency',
          currency: 'VND'
        }).format(order.TongTien);
        
        // Status badge
        let statusClass = 'status-pending';
        if (order.TrangThai === 'ƒê√£ x√°c nh·∫≠n') statusClass = 'status-confirmed';
        else if (order.TrangThai === 'ƒêang giao h√†ng') statusClass = 'status-shipped';
        else if (order.TrangThai === 'ƒê√£ giao') statusClass = 'status-delivered';
        else if (order.TrangThai === 'ƒê√£ h·ªßy') statusClass = 'status-cancelled';
        
        const detailContent = `
          <div class="row">
            <div class="col-md-6">
              <h5>Th√¥ng Tin Kh√°ch H√†ng</h5>
              <p><strong>T√™n:</strong> ${order.TenKhachHang}</p>
              <p><strong>SƒêT:</strong> ${order.SoDienThoai}</p>
              <p><strong>Email:</strong> ${order.Email || 'Kh√¥ng c√≥'}</p>
            </div>
            <div class="col-md-6">
              <h5>Th√¥ng Tin ƒê∆°n H√†ng</h5>
              <p><strong>M√£ ƒêH:</strong> #${order.MaDonHang}</p>
              <p><strong>Ng√†y ƒë·∫∑t:</strong> ${orderDate}</p>
              <p><strong>Ng√†y giao:</strong> ${deliveryDate}</p>
              <p><strong>T·ªïng ti·ªÅn:</strong> ${formattedTotal}</p>
              <p><strong>Tr·∫°ng th√°i:</strong> <span class="status-badge ${statusClass}">${order.TrangThai}</span></p>
            </div>
          </div>
          <div class="mt-4">
            <h5>Chi Ti·∫øt S·∫£n Ph·∫©m</h5>
            <div class="alert alert-luxe">
              <i class="bi bi-info-circle me-2"></i>
              Th√¥ng tin chi ti·∫øt s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã ·ªü ƒë√¢y khi c√≥ k·∫øt n·ªëi v·ªõi API chi ti·∫øt ƒë∆°n h√†ng.
            </div>
          </div>
        `;
        
        document.getElementById('orderDetailContent').innerHTML = detailContent;
        
        const modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
        modal.show();
      })
      .catch(error => {
        console.error('Error loading order details:', error);
        alert('C√≥ l·ªói x·∫£y ra khi t·∫£i chi ti·∫øt ƒë∆°n h√†ng.');
      });
    }
    
    // Edit order
    function editOrder(orderId) {
      // In a real application, you would open an edit modal with pre-filled data
      alert(`Ch·ª©c nƒÉng ch·ªânh s·ª≠a ƒë∆°n h√†ng #${orderId} s·∫Ω ƒë∆∞·ª£c tri·ªÉn khai ·ªü phi√™n b·∫£n sau.`);
    }
    
    // Delete order
    function deleteOrder(orderId) {
      if (confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ƒë∆°n h√†ng #${orderId}?`)) {
        fetch(API_BASE_URL, {
          method: 'DELETE',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ MaDonHang: orderId })
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            // Reload orders
            loadOrders();
            alert('X√≥a ƒë∆°n h√†ng th√†nh c√¥ng!');
          } else {
            alert('C√≥ l·ªói x·∫£y ra khi x√≥a ƒë∆°n h√†ng: ' + data.message);
          }
        })
        .catch(error => {
          console.error('Error deleting order:', error);
          alert('C√≥ l·ªói x·∫£y ra khi x√≥a ƒë∆°n h√†ng.');
        });
      }
    }
  </script>
</body>
</html>